---
title: "[DVA-C02 #4] S3 스토리지 완벽 정리"
description: "AWS DVA-C02 스터디 4편. S3의 기본 개념부터 스토리지 클래스, 버저닝, 복제, 라이프사이클, 성능 최적화까지 한 번에 정리합니다."
publishedAt: 2025-04-11
category: "cloud"
tags: ["AWS", "DVA-C02", "S3"]
---

> AWS DVA-C02 스터디 시리즈 4편입니다. [3편: 데이터베이스 서비스](/blog/dva-03-database)

## S3 기본 개념

S3(Simple Storage Service)는 AWS의 객체 스토리지 서비스다. 파일을 저장하고 HTTP로 접근할 수 있다.

### 구조

- **Bucket**: 최상위 컨테이너. 이름이 글로벌하게 유일해야 한다.
- **Object**: 실제 파일. Key(경로), Body(데이터), Metadata, Tags로 구성.
- 최대 객체 크기는 **5TB**. 100MB 이상은 Multipart Upload 권장, 5GB 이상은 필수.

### 버저닝

버킷 단위로 활성화한다. 같은 키로 파일을 올리면 이전 버전이 보존되어 실수로 삭제/덮어쓴 파일을 복구할 수 있다. 한 번 활성화하면 비활성화할 수 없고, 일시 중지만 가능하다.

### 복제

- **SRR (Same-Region Replication)**: 같은 리전 내 복제. 로그 집계 등에 사용.
- **CRR (Cross-Region Replication)**: 다른 리전으로 복제. 재해 복구, 지연 시간 단축에 사용.

양쪽 버킷에 버저닝이 활성화되어 있어야 하고, 복제를 위한 IAM 역할이 필요하다. 교차 계정 복제도 가능하다.

## 보안

### 접근 제어 방식

- **IAM 정책**: 사용자/역할에 S3 권한 부여
- **Bucket Policy**: 버킷 레벨의 JSON 정책. 퍼블릭 접근, 교차 계정 접근 등에 사용.
- **ACL**: 객체/버킷 단위의 접근 제어 (현재는 Bucket Policy 권장)
- **Block Public Access**: 버킷의 퍼블릭 접근을 일괄 차단하는 설정

### 암호화

| 방식 | 키 관리 | 사용 사례 |
|------|---------|-----------|
| SSE-S3 | AWS 관리 | 기본값. 대부분의 경우 충분 |
| SSE-KMS | KMS 키 사용 | 키 회전, 감사 로그가 필요할 때 |
| SSE-C | 고객 제공 키 | 자체 키 관리가 필요할 때 |
| Client-Side | 클라이언트에서 암호화 후 업로드 | 완전한 제어가 필요할 때 |

### Pre-signed URL

S3 객체에 대한 임시 접근 URL을 생성한다. 유효 기간을 설정할 수 있어 비공개 객체를 특정 사용자에게 임시로 공유할 때 유용하다.

### CORS

S3 버킷을 웹사이트로 사용할 때, 다른 도메인에서의 접근을 허용하려면 CORS 설정이 필요하다. 허용할 Origin, Method, Header를 JSON으로 설정한다.

## 스토리지 클래스

| 클래스 | 가용성 | 최소 보관 | 복원 시간 | 비용 |
|--------|--------|-----------|-----------|------|
| Standard | 99.99% | 없음 | 즉시 | 높음 |
| Intelligent-Tiering | 99.9% | 없음 | 즉시 | 자동 최적화 |
| Standard-IA | 99.9% | 30일 | 즉시 | 중간 |
| One Zone-IA | 99.5% | 30일 | 즉시 | 낮음 |
| Glacier Instant | 99.9% | 90일 | 밀리초 | 낮음 |
| Glacier Flexible | 99.9% | 90일 | 분~시간 | 매우 낮음 |
| Glacier Deep Archive | 99.9% | 180일 | 12시간+ | 최저 |

**내구성(Durability)**은 모든 클래스에서 99.999999999%(11 9's)로 동일하다. **가용성(Availability)**은 클래스마다 다르다.

Intelligent-Tiering은 접근 패턴을 모니터링하여 자동으로 계층을 이동시켜주므로, 접근 패턴이 예측 불가능할 때 유용하다.

## 라이프사이클 관리

객체를 자동으로 다른 스토리지 클래스로 전환하거나 삭제하는 규칙을 설정할 수 있다.

- **Transition**: 일정 기간 후 더 저렴한 클래스로 이동 (예: 30일 후 Standard → IA → 90일 후 Glacier)
- **Expiration**: 일정 기간 후 자동 삭제
- **NoncurrentVersion**: 이전 버전 객체에 대한 전환/삭제 규칙

라이프사이클 규칙을 만들기 전에 **S3 Analytics**를 활용하면 좋다. 접근 패턴을 분석하여 어떤 스토리지 클래스로 전환하면 좋을지 추천해준다.

## 이벤트 알림

객체 생성, 삭제 등의 이벤트를 감지하여 다른 서비스로 알림을 보낼 수 있다.

- 대상: **SNS**, **SQS**, **Lambda**
- 접두사, 태그로 필터링 가능
- 예: `images/` 경로에 객체가 생성되면 Lambda로 이미지 리사이즈 트리거

## 성능 최적화

S3는 기본적으로 높은 처리량을 제공한다. 접두사(prefix)별로 초당 3,500 PUT과 5,500 GET 요청을 처리할 수 있다.

### Multipart Upload

대용량 파일을 분할하여 병렬로 업로드한다. 100MB 이상 권장, 5GB 이상 필수. 일부 파트가 실패해도 해당 파트만 재전송하면 된다.

### Transfer Acceleration

업로드/다운로드 시 CloudFront 엣지 로케이션을 경유한다. 클라이언트 → 엣지(퍼블릭 인터넷) → S3(AWS 백본 네트워크) 경로로, 물리적으로 먼 리전에 전송할 때 속도가 크게 향상된다.

### Byte-Range Fetch

파일의 특정 바이트 범위만 병렬로 다운로드한다. 대용량 파일을 빠르게 받거나, 파일의 헤더 부분만 가져올 때 유용하다.

다음 글에서는 VPC 네트워크와 CloudFront CDN을 다룬다.
